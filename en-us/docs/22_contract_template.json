{
  "filename": "22_contract_template.md",
  "__html": "<h2>Typical contract analysis</h2>\n<h3>LockWithPublicKey</h3>\n<p><code>LockWithPublicKey</code> source code as follows:</p>\n<pre><code>contract LockWithPublicKey(publicKey: PublicKey) locks valueAmount of valueAsset {\n  clause unlockWithSig(sig: Signature) {\n    verify checkTxSig(publicKey, sig)\n    unlock valueAmount of valueAsset\n  }\n}\n</code></pre>\n<ul>\n<li>The binary: <code>ae7cac</code></li>\n<li>The instruction code: <code>TXSIGHASH SWAP CHECKSIG</code></li>\n</ul>\n<p>If the contract parameters is as follows:</p>\n<ul>\n<li><code>publicKey</code> : e9108d3ca8049800727f6a3505b3a2710dc579405dde03c250f16d9a7e1e6e78</li>\n</ul>\n<p>The instantiated contract program: <code>20e9108d3ca8049800727f6a3505b3a2710dc579405dde03c250f16d9a7e1e6e787403ae7cac00c0</code></p>\n<p>The parameters of unlocking contract is as follows:</p>\n<ul>\n<li><code>sig</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"raw_tx_signature\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"xpub\"</span>: <span class=\"hljs-string\">\"5c6145b241b1147987565719657a0506ebb417a2e110a235a42cfb40951880f447432f930ce9fd1a6b7e51b3ddbfdc7adb57d33448f93c0defb4de630703a144\"</span>,\n    <span class=\"hljs-string\">\"derivation_path\"</span>: [\n      <span class=\"hljs-string\">\"010100000000000000\"</span>,\n      <span class=\"hljs-string\">\"0100000000000000\"</span>\n    ]\n  }\n}\n</code></pre>\n<p>The example of unlocking contract transaction:</p>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"base_transaction\"</span>: <span class=\"hljs-literal\">null</span>,\n  <span class=\"hljs-string\">\"actions\"</span>: [\n    {\n      <span class=\"hljs-string\">\"output_id\"</span>: <span class=\"hljs-string\">\"913d941faf5a19501ab4c06747fe1eb38c5ae76b74d0f5af524fc40ee6bf7116\"</span>,\n      <span class=\"hljs-string\">\"arguments\"</span>: [\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"raw_tx_signature\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"xpub\"</span>: <span class=\"hljs-string\">\"5c6145b241b1147987565719657a0506ebb417a2e110a235a42cfb40951880f447432f930ce9fd1a6b7e51b3ddbfdc7adb57d33448f93c0defb4de630703a144\"</span>,\n            <span class=\"hljs-string\">\"derivation_path\"</span>: [\n              <span class=\"hljs-string\">\"010100000000000000\"</span>,\n              <span class=\"hljs-string\">\"0100000000000000\"</span>\n            ]\n          }\n        }\n      ],\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account_unspent_output\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">100000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"1e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c22\"</span>,\n      <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014c5a5b563c4623018557fb299259542b8739f6bc2\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0G1JIR6400A02\"</span>,\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">20000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n    }\n  ],\n  <span class=\"hljs-string\">\"ttl\"</span>: <span class=\"hljs-number\">0</span>,\n  <span class=\"hljs-string\">\"time_range\"</span>: <span class=\"hljs-number\">1521625823</span>\n}\n</code></pre>\n<h3>LockWithMultiSig</h3>\n<p><code>LockWithMultiSig</code> source code as follows：</p>\n<pre><code>contract LockWithMultiSig(publicKey1: PublicKey,\n                        publicKey2: PublicKey,\n                        publicKey3: PublicKey) locks valueAmount of valueAsset {\n  clause spend(sig1: Signature, sig2: Signature) {\n    verify checkTxMultiSig([publicKey1, publicKey2, publicKey3], [sig1, sig2])\n    unlock valueAmount of valueAsset\n  }\n}\n</code></pre>\n<ul>\n<li>The binary: <code>537a547a526bae71557a536c7cad</code></li>\n<li>The instruction code: <code>3 ROLL 4 ROLL 2 TOALTSTACK TXSIGHASH 2ROT 5 ROLL 3 FROMALTSTACK SWAP CHECKMULTISIG</code></li>\n</ul>\n<p>If the contract parameters are as follows:</p>\n<ul>\n<li><code>publicKey1</code> : e9108d3ca8049800727f6a3505b3a2710dc579405dde03c250f16d9a7e1e6e78</li>\n<li><code>publicKey2</code> : 1f51c25decab2168835f1292a5432707ed94b90be8f5ec0d62aca1c6daa1ec55</li>\n<li><code>publicKey3</code> : e386c85178418fc72f8182111aa818ac736f3f7f1eee75ccdd7e5a057abe8fe0</li>\n</ul>\n<p>The instantiated contract program: (Please note that the sequence in which the contract parameters are added is the reverse of the order in which the virtual machines are pushed onto the stack.)<code>20e386c85178418fc72f8182111aa818ac736f3f7f1eee75ccdd7e5a057abe8fe0201f51c25decab2168835f1292a5432707ed94b90be8f5ec0d62aca1c6daa1ec5520e9108d3ca8049800727f6a3505b3a2710dc579405dde03c250f16d9a7e1e6e78740e537a547a526bae71557a536c7cad00c0</code></p>\n<p>The parameters of unlocking contract is as follows:(Please note the sequence of unlocking the contract parameters, otherwise the VM will fail to execute)</p>\n<ul>\n<li><code>sig1</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"raw_tx_signature\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"xpub\"</span>: <span class=\"hljs-string\">\"5c6145b241b1147987565719657a0506ebb417a2e110a235a42cfb40951880f447432f930ce9fd1a6b7e51b3ddbfdc7adb57d33448f93c0defb4de630703a144\"</span>,\n    <span class=\"hljs-string\">\"derivation_path\"</span>: [\n      <span class=\"hljs-string\">\"010100000000000000\"</span>,\n      <span class=\"hljs-string\">\"0100000000000000\"</span>\n    ]\n  }\n}\n</code></pre>\n<ul>\n<li><code>sig2</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"raw_tx_signature\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"xpub\"</span>: <span class=\"hljs-string\">\"e0f470a91bcd99497b4804d76264a293e257ca906938a43e34a6a0e619bbf5f1606a2866eca2ceec9f93348c577b052f30bb7ef41b4b09fff28eb1004ca1f8d5\"</span>,\n    <span class=\"hljs-string\">\"derivation_path\"</span>: [\n      <span class=\"hljs-string\">\"010200000000000000\"</span>,\n      <span class=\"hljs-string\">\"0100000000000000\"</span>\n    ]\n  }\n}\n</code></pre>\n<p>The example of unlocking contract transaction:</p>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"base_transaction\"</span>: <span class=\"hljs-literal\">null</span>,\n  <span class=\"hljs-string\">\"actions\"</span>: [\n    {\n      <span class=\"hljs-string\">\"output_id\"</span>: <span class=\"hljs-string\">\"bf6a3999cfbd25cef24ff1b19c6f2e0988de2e8ef3d40ed7c15402f2a7327bfa\"</span>,\n      <span class=\"hljs-string\">\"arguments\"</span>: [\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"raw_tx_signature\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"xpub\"</span>: <span class=\"hljs-string\">\"5c6145b241b1147987565719657a0506ebb417a2e110a235a42cfb40951880f447432f930ce9fd1a6b7e51b3ddbfdc7adb57d33448f93c0defb4de630703a144\"</span>,\n            <span class=\"hljs-string\">\"derivation_path\"</span>: [\n              <span class=\"hljs-string\">\"010100000000000000\"</span>,\n              <span class=\"hljs-string\">\"0100000000000000\"</span>\n            ]\n          }\n        },\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"raw_tx_signature\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"xpub\"</span>: <span class=\"hljs-string\">\"e0f470a91bcd99497b4804d76264a293e257ca906938a43e34a6a0e619bbf5f1606a2866eca2ceec9f93348c577b052f30bb7ef41b4b09fff28eb1004ca1f8d5\"</span>,\n            <span class=\"hljs-string\">\"derivation_path\"</span>: [\n              <span class=\"hljs-string\">\"010200000000000000\"</span>,\n              <span class=\"hljs-string\">\"0100000000000000\"</span>\n            ]\n          }\n        }\n      ],\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account_unspent_output\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">200000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"1e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c22\"</span>,\n      <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014c5a5b563c4623018557fb299259542b8739f6bc2\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0G1JIR6400A02\"</span>,\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">20000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n    }\n  ],\n  <span class=\"hljs-string\">\"ttl\"</span>: <span class=\"hljs-number\">0</span>,\n  <span class=\"hljs-string\">\"time_range\"</span>: <span class=\"hljs-number\">1521625823</span>\n}\n</code></pre>\n<h3>LockWithPublicKeyHash</h3>\n<p><code>LockWithPublicKeyHash</code> source code as follows：</p>\n<pre><code>contract LockWithPublicKeyHash(pubKeyHash: Hash) locks valueAmount of valueAsset {\n  clause spend(pubKey: PublicKey, sig: Signature) {\n    verify sha3(pubKey) == pubKeyHash\n    verify checkTxSig(pubKey, sig)\n    unlock valueAmount of valueAsset\n  }\n}\n</code></pre>\n<ul>\n<li>The binary: <code>5279aa887cae7cac</code></li>\n<li>The instruction code: <code>2 PICK SHA3 EQUALVERIFY SWAP TXSIGHASH SWAP CHECKSIG</code></li>\n</ul>\n<p>If the contract parameters are as follows:</p>\n<ul>\n<li><code>pubKeyHash</code> : b3f37834dfa74174e9f0d208302e77c637cfe66c3e37fe1e1574e416b3516e89</li>\n</ul>\n<p>The instantiated contract program:\n<code>20b3f37834dfa74174e9f0d208302e77c637cfe66c3e37fe1e1574e416b3516e8974085279aa887cae7cac00c0</code></p>\n<p>The parameters of unlocking contract is as follows:</p>\n<ul>\n<li><code>pubKey</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"data\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-string\">\"b3f37834dfa74174e9f0d208302e77c637cfe66c3e37fe1e1574e416b3516e89\"</span>\n  }\n}\n</code></pre>\n<ul>\n<li><code>sig</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"raw_tx_signature\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"xpub\"</span>: <span class=\"hljs-string\">\"5c6145b241b1147987565719657a0506ebb417a2e110a235a42cfb40951880f447432f930ce9fd1a6b7e51b3ddbfdc7adb57d33448f93c0defb4de630703a144\"</span>,\n    <span class=\"hljs-string\">\"derivation_path\"</span>: [\n      <span class=\"hljs-string\">\"010100000000000000\"</span>,\n      <span class=\"hljs-string\">\"0100000000000000\"</span>\n    ]\n  }\n}\n</code></pre>\n<p>The example of unlocking contract transaction:</p>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"base_transaction\"</span>: <span class=\"hljs-literal\">null</span>,\n  <span class=\"hljs-string\">\"actions\"</span>: [\n    {\n      <span class=\"hljs-string\">\"output_id\"</span>: <span class=\"hljs-string\">\"f98e0aa007dec76a827e924c25678e8c04b922fb28da9f5513a92787ac53725b\"</span>,\n      <span class=\"hljs-string\">\"arguments\"</span>: [\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"data\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-string\">\"b3f37834dfa74174e9f0d208302e77c637cfe66c3e37fe1e1574e416b3516e89\"</span>\n          }\n        },\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"raw_tx_signature\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"xpub\"</span>: <span class=\"hljs-string\">\"5c6145b241b1147987565719657a0506ebb417a2e110a235a42cfb40951880f447432f930ce9fd1a6b7e51b3ddbfdc7adb57d33448f93c0defb4de630703a144\"</span>,\n            <span class=\"hljs-string\">\"derivation_path\"</span>: [\n              <span class=\"hljs-string\">\"010100000000000000\"</span>,\n              <span class=\"hljs-string\">\"0100000000000000\"</span>\n            ]\n          }\n        }\n      ],\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account_unspent_output\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">300000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"1e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c22\"</span>,\n      <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014c5a5b563c4623018557fb299259542b8739f6bc2\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0G1JIR6400A02\"</span>,\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">20000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n    }\n  ],\n  <span class=\"hljs-string\">\"ttl\"</span>: <span class=\"hljs-number\">0</span>,\n  <span class=\"hljs-string\">\"time_range\"</span>: <span class=\"hljs-number\">1521625823</span>\n}\n</code></pre>\n<h3>RevealPreimage</h3>\n<p><code>RevealPreimage</code> source code as follows:</p>\n<pre><code>contract RevealPreimage(hash: Hash) locks valueAmount of valueAsset {\n  clause reveal(string: String) {\n    verify sha3(string) == hash\n    unlock valueAmount of valueAsset\n  }\n}\n</code></pre>\n<ul>\n<li>The binary: <code>7caa87</code></li>\n<li>The instruction code: <code>SWAP SHA3 EQUAL</code></li>\n</ul>\n<p>If the contract parameters are as follows:</p>\n<ul>\n<li><code>hash</code>: 22e829107201c6b975b1dc60b928117916285ceb4aa5c6d7b4b8cc48038083e0</li>\n</ul>\n<p>The instantiated contract program: <code>2022e829107201c6b975b1dc60b928117916285ceb4aa5c6d7b4b8cc48038083e074037caa8700c0</code></p>\n<p>The parameters of unlocking contract is as follows:</p>\n<ul>\n<li><code>string</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"string\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-string\">\"string\"</span>\n  }\n}\n</code></pre>\n<p>or</p>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"data\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-string\">\"737472696e67\"</span>\n  }\n}\n</code></pre>\n<p>The example of unlocking contract transaction:</p>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"base_transaction\"</span>: <span class=\"hljs-literal\">null</span>,\n  <span class=\"hljs-string\">\"actions\"</span>: [\n    {\n      <span class=\"hljs-string\">\"output_id\"</span>: <span class=\"hljs-string\">\"35fe216572bea7d81effd2fed2db1bc257f977dfa492299742a0dee2a9ae1c8e\"</span>,\n      <span class=\"hljs-string\">\"arguments\"</span>: [\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"data\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-string\">\"737472696e67\"</span>\n          }\n        }\n      ],\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account_unspent_output\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">400000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"1e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c22\"</span>,\n      <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014c5a5b563c4623018557fb299259542b8739f6bc2\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0G1JIR6400A02\"</span>,\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">20000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n    }\n  ],\n  <span class=\"hljs-string\">\"ttl\"</span>: <span class=\"hljs-number\">0</span>,\n  <span class=\"hljs-string\">\"time_range\"</span>: <span class=\"hljs-number\">1521625823</span>\n}\n</code></pre>\n<h3>Tradeoffer</h3>\n<p><code>TradeOffer</code> source code as follows：</p>\n<pre><code>contract TradeOffer(assetRequested: Asset,\n                  amountRequested: Amount,\n                  seller: Program,\n                  cancelKey: PublicKey) locks valueAmount of valueAsset {\n  clause trade() {\n    lock amountRequested of assetRequested with seller\n    unlock valueAmount of valueAsset\n  }\n  clause cancel(sellerSig: Signature) {\n    verify checkTxSig(cancelKey, sellerSig)\n    unlock valueAmount of valueAsset\n  }\n}\n</code></pre>\n<ul>\n<li>The binary: <code>547a6413000000007b7b51547ac1631a000000547a547aae7cac</code></li>\n<li>The instruction code: <code>4 ROLL JUMPIF:$cancel $trade FALSE ROT ROT 1 4 ROLL CHECKOUTPUT JUMP:$_end $cancel 4 ROLL 4 ROLL TXSIGHASH SWAP CHECKSIG $_end</code></li>\n</ul>\n<p>If the contract parameters are as follows:</p>\n<ul>\n<li><code>assetRequested</code> : 1e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c22</li>\n<li><code>amountRequested</code> : 99</li>\n<li><code>seller</code> : 0014c5a5b563c4623018557fb299259542b8739f6bc2</li>\n<li><code>cancelKey</code> : e9108d3ca8049800727f6a3505b3a2710dc579405dde03c250f16d9a7e1e6e78</li>\n</ul>\n<p>The instantiated contract program: <code>20e9108d3ca8049800727f6a3505b3a2710dc579405dde03c250f16d9a7e1e6e78160014c5a5b563c4623018557fb299259542b8739f6bc20163201e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c22741a547a6413000000007b7b51547ac1631a000000547a547aae7cac00c0</code></p>\n<p>The parameters of unlocking contract is as follows: (Please note that the contract contains two clauses, you can choose one when you unlock the contract, where <code>clause_selector</code> refers to the position of the selected clause in the contract, the position number starts from <code>0</code>. In addition, you need to pay attention to the order of unlocking the contract parameters, otherwise the VM will fail to execute.)</p>\n<ul>\n<li>\n<p><code>clause trade</code> unlock parameters :</p>\n<ul>\n<li><code>clause_selector</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">0</span>\n  }\n}\n</code></pre>\n<p>or</p>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"data\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-string\">\"00\"</span>\n  }\n}\n</code></pre>\n<ul>\n<li>The action of transaction for the <code>lock</code> statement: <code>lock amountRequested of assetRequested with seller</code> indicates that the unlocking account needs to pay the number of <code>amountRequested</code> asset <code>assetRequested</code> to the receiving program <code>seller</code>. Please note that the above parameters must be strictly matched, otherwise the contract execution will fail.</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">99</span>,\n  <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"2a1861ba3a5f7bbdb98392b33289465b462fe8e9d4b9c00f78cbcb1ac20fa93f\"</span>,\n  <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014c5a5b563c4623018557fb299259542b8739f6bc2\"</span>,\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n},\n{\n  <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0G1JJF0KG0A06\"</span>,\n  <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">99</span>,\n  <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"2a1861ba3a5f7bbdb98392b33289465b462fe8e9d4b9c00f78cbcb1ac20fa93f\"</span>,\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n}\n</code></pre>\n<p>The example of unlocking contract transaction:</p>\n<pre><code class=\"language-js\"><span class=\"hljs-comment\">// clause trade</span>\n{\n  <span class=\"hljs-string\">\"base_transaction\"</span>: <span class=\"hljs-literal\">null</span>,\n  <span class=\"hljs-string\">\"actions\"</span>: [\n    {\n      <span class=\"hljs-string\">\"output_id\"</span>: <span class=\"hljs-string\">\"9f3a63d2f8352a6891dadd8a8337268873c84a852594f35b0b9815a4b9d56d86\"</span>,\n      <span class=\"hljs-string\">\"arguments\"</span>: [\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">0</span>\n          }\n        }\n      ],\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account_unspent_output\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">99</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"1e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c22\"</span>,\n      <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014c5a5b563c4623018557fb299259542b8739f6bc2\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0G1JIR6400A02\"</span>,\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">99</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"1e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c22\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0G1JIR6400A02\"</span>,\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">20000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">500000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"2a1861ba3a5f7bbdb98392b33289465b462fe8e9d4b9c00f78cbcb1ac20fa93f\"</span>,\n      <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014905df16bc248790676744bab063a1ae810803bd7\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    }\n  ],\n  <span class=\"hljs-string\">\"ttl\"</span>: <span class=\"hljs-number\">0</span>,\n  <span class=\"hljs-string\">\"time_range\"</span>: <span class=\"hljs-number\">1521625823</span>\n}\n</code></pre>\n</li>\n<li>\n<p><code>clause cancel</code> unlock parameter :</p>\n<ul>\n<li><code>sellerSig</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"raw_tx_signature\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"xpub\"</span>: <span class=\"hljs-string\">\"5c6145b241b1147987565719657a0506ebb417a2e110a235a42cfb40951880f447432f930ce9fd1a6b7e51b3ddbfdc7adb57d33448f93c0defb4de630703a144\"</span>,\n    <span class=\"hljs-string\">\"derivation_path\"</span>: [\n      <span class=\"hljs-string\">\"010100000000000000\"</span>,\n      <span class=\"hljs-string\">\"0100000000000000\"</span>\n    ]\n  }\n}\n</code></pre>\n<ul>\n<li><code>clause_selector</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">1</span>\n  }\n}\n</code></pre>\n<p>or</p>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"data\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-string\">\"01\"</span>\n  }\n}\n</code></pre>\n<p>The example of unlocking contract transaction:</p>\n<pre><code class=\"language-js\"><span class=\"hljs-comment\">// clause cancel</span>\n{\n  <span class=\"hljs-string\">\"base_transaction\"</span>: <span class=\"hljs-literal\">null</span>,\n  <span class=\"hljs-string\">\"actions\"</span>: [\n    {\n      <span class=\"hljs-string\">\"output_id\"</span>: <span class=\"hljs-string\">\"9f3a63d2f8352a6891dadd8a8337268873c84a852594f35b0b9815a4b9d56d86\"</span>,\n      <span class=\"hljs-string\">\"arguments\"</span>: [\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"raw_tx_signature\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"xpub\"</span>: <span class=\"hljs-string\">\"5c6145b241b1147987565719657a0506ebb417a2e110a235a42cfb40951880f447432f930ce9fd1a6b7e51b3ddbfdc7adb57d33448f93c0defb4de630703a144\"</span>,\n            <span class=\"hljs-string\">\"derivation_path\"</span>: [\n              <span class=\"hljs-string\">\"010100000000000000\"</span>,\n              <span class=\"hljs-string\">\"0100000000000000\"</span>\n            ]\n          }\n        },\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">1</span>\n          }\n        }\n      ],\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account_unspent_output\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">500000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"1e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c22\"</span>,\n      <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014929ec7d92f89d74716ba9591eaea588aa1867f75\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0G1JIR6400A02\"</span>,\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">20000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n    }\n  ],\n  <span class=\"hljs-string\">\"ttl\"</span>: <span class=\"hljs-number\">0</span>,\n  <span class=\"hljs-string\">\"time_range\"</span>: <span class=\"hljs-number\">1521625823</span>\n}\n</code></pre>\n</li>\n</ul>\n<h3>Escrow</h3>\n<p><code>Escrow</code> source code as follows：</p>\n<pre><code>contract Escrow(agent: PublicKey,\n              sender: Program,\n              recipient: Program) locks valueAmount of valueAsset {\n  clause approve(sig: Signature) {\n    verify checkTxSig(agent, sig)\n    lock valueAmount of valueAsset with recipient\n  }\n  clause reject(sig: Signature) {\n    verify checkTxSig(agent, sig)\n    lock valueAmount of valueAsset with sender\n  }\n}\n</code></pre>\n<ul>\n<li>The binary: <code>537a641a000000537a7cae7cac6900c3c251557ac16328000000537a7cae7cac6900c3c251547ac1</code></li>\n<li>The instruction code: <code>3 ROLL JUMPIF:$reject $approve 3 ROLL SWAP TXSIGHASH SWAP CHECKSIG VERIFY FALSE AMOUNT ASSET 1 5 ROLL CHECKOUTPUT JUMP:$_end $reject 3 ROLL SWAP TXSIGHASH SWAP CHECKSIG VERIFY FALSE AMOUNT ASSET 1 4 ROLL CHECKOUTPUT $_end</code></li>\n</ul>\n<p>If the contract parameters are as follows:</p>\n<ul>\n<li><code>agent</code> : e9108d3ca8049800727f6a3505b3a2710dc579405dde03c250f16d9a7e1e6e78</li>\n<li><code>sender</code> : 0014905df16bc248790676744bab063a1ae810803bd7</li>\n<li><code>recipient</code> : 0014929ec7d92f89d74716ba9591eaea588aa1867f75</li>\n</ul>\n<p>The instantiated contract program: <code>160014929ec7d92f89d74716ba9591eaea588aa1867f75160014905df16bc248790676744bab063a1ae810803bd720e9108d3ca8049800727f6a3505b3a2710dc579405dde03c250f16d9a7e1e6e787428537a641a000000537a7cae7cac6900c3c251557ac16328000000537a7cae7cac6900c3c251547ac100c0</code></p>\n<p>The parameters of unlocking contract is as follows:</p>\n<ul>\n<li>\n<p><code>clause approve</code> unlock parameters :</p>\n<ul>\n<li><code>sellerSig</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"raw_tx_signature\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"xpub\"</span>: <span class=\"hljs-string\">\"5c6145b241b1147987565719657a0506ebb417a2e110a235a42cfb40951880f447432f930ce9fd1a6b7e51b3ddbfdc7adb57d33448f93c0defb4de630703a144\"</span>,\n    <span class=\"hljs-string\">\"derivation_path\"</span>: [\n      <span class=\"hljs-string\">\"010100000000000000\"</span>,\n      <span class=\"hljs-string\">\"0100000000000000\"</span>\n    ]\n  }\n}\n</code></pre>\n<ul>\n<li><code>clause_selector</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">0</span>\n  }\n}\n</code></pre>\n<p>or</p>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"data\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-string\">\"00\"</span>\n  }\n}\n</code></pre>\n<p>The example of unlocking contract transaction: (please note the <code>control_program</code> must be <code>recipient</code>, otherwise will fail to execute)</p>\n<pre><code class=\"language-js\"><span class=\"hljs-comment\">// clause approve</span>\n{\n  <span class=\"hljs-string\">\"base_transaction\"</span>: <span class=\"hljs-literal\">null</span>,\n  <span class=\"hljs-string\">\"actions\"</span>: [\n    {\n      <span class=\"hljs-string\">\"output_id\"</span>: <span class=\"hljs-string\">\"15ee3368e77a0699eadaf99bbc096a48595ac975d05b10b198d902dde808e120\"</span>,\n      <span class=\"hljs-string\">\"arguments\"</span>: [\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"raw_tx_signature\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"xpub\"</span>: <span class=\"hljs-string\">\"5c6145b241b1147987565719657a0506ebb417a2e110a235a42cfb40951880f447432f930ce9fd1a6b7e51b3ddbfdc7adb57d33448f93c0defb4de630703a144\"</span>,\n            <span class=\"hljs-string\">\"derivation_path\"</span>: [\n              <span class=\"hljs-string\">\"010100000000000000\"</span>,\n              <span class=\"hljs-string\">\"0100000000000000\"</span>\n            ]\n          }\n        },\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">0</span>\n          }\n        }\n      ],\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account_unspent_output\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">600000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"1e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c22\"</span>,\n      <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014929ec7d92f89d74716ba9591eaea588aa1867f75\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0G1JIR6400A02\"</span>,\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">20000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n    }\n  ],\n  <span class=\"hljs-string\">\"ttl\"</span>: <span class=\"hljs-number\">0</span>,\n  <span class=\"hljs-string\">\"time_range\"</span>: <span class=\"hljs-number\">1521625823</span>\n}\n</code></pre>\n</li>\n<li>\n<p><code>clause reject</code> unlock parameters :</p>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"raw_tx_signature\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"xpub\"</span>: <span class=\"hljs-string\">\"5c6145b241b1147987565719657a0506ebb417a2e110a235a42cfb40951880f447432f930ce9fd1a6b7e51b3ddbfdc7adb57d33448f93c0defb4de630703a144\"</span>,\n    <span class=\"hljs-string\">\"derivation_path\"</span>: [\n      <span class=\"hljs-string\">\"010100000000000000\"</span>,\n      <span class=\"hljs-string\">\"0100000000000000\"</span>\n    ]\n  }\n}\n</code></pre>\n<ul>\n<li><code>clause_selector</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">1</span>\n  }\n}\n</code></pre>\n<p>or</p>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"data\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-string\">\"01\"</span>\n  }\n}\n</code></pre>\n<p>The example of unlocking contract transaction: (please note the <code>control_program</code> must be <code>recipient</code>,otherwise will fail to execute)</p>\n<pre><code class=\"language-js\"><span class=\"hljs-comment\">// clause reject</span>\n{\n  <span class=\"hljs-string\">\"base_transaction\"</span>: <span class=\"hljs-literal\">null</span>,\n  <span class=\"hljs-string\">\"actions\"</span>: [\n    {\n      <span class=\"hljs-string\">\"output_id\"</span>: <span class=\"hljs-string\">\"15ee3368e77a0699eadaf99bbc096a48595ac975d05b10b198d902dde808e120\"</span>,\n      <span class=\"hljs-string\">\"arguments\"</span>: [\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"raw_tx_signature\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"xpub\"</span>: <span class=\"hljs-string\">\"5c6145b241b1147987565719657a0506ebb417a2e110a235a42cfb40951880f447432f930ce9fd1a6b7e51b3ddbfdc7adb57d33448f93c0defb4de630703a144\"</span>,\n            <span class=\"hljs-string\">\"derivation_path\"</span>: [\n              <span class=\"hljs-string\">\"010100000000000000\"</span>,\n              <span class=\"hljs-string\">\"0100000000000000\"</span>\n            ]\n          }\n        },\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">1</span>\n          }\n        }\n      ],\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account_unspent_output\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">600000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"1e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c22\"</span>,\n      <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014905df16bc248790676744bab063a1ae810803bd7\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0G1JIR6400A02\"</span>,\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">20000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n    }\n  ],\n  <span class=\"hljs-string\">\"ttl\"</span>: <span class=\"hljs-number\">0</span>,\n  <span class=\"hljs-string\">\"time_range\"</span>: <span class=\"hljs-number\">1521625823</span>\n}\n</code></pre>\n</li>\n</ul>\n<h3>LoanCollateral</h3>\n<p><code>LoanCollateral</code>source code as follows：</p>\n<pre><code>contract LoanCollateral(assetLoaned: Asset,\n                      amountLoaned: Amount,\n                      blockHeight: Integer,\n                      lender: Program,\n                      borrower: Program) locks valueAmount of valueAsset {\n  clause repay() {\n    lock amountLoaned of assetLoaned with lender\n    lock valueAmount of valueAsset with borrower\n  }\n  clause default() {\n    verify above(blockHeight)\n    lock valueAmount of valueAsset with lender\n  }\n}\n</code></pre>\n<ul>\n<li>The binary: <code>557a641b000000007b7b51557ac16951c3c251557ac163260000007bcd9f6900c3c251567ac1</code></li>\n<li>The instruction code: <code>5 ROLL JUMPIF:$default $repay FALSE ROT ROT 1 5 ROLL CHECKOUTPUT VERIFY 1 AMOUNT ASSET 1 5 ROLL CHECKOUTPUT JUMP:$_end $default ROT BLOCKHEIGHT LESSTHAN VERIFY FALSE AMOUNT ASSET 1 6 ROLL CHECKOUTPUT $_end</code></li>\n</ul>\n<p>If the contract parameters are as follows:</p>\n<ul>\n<li><code>assetLoaned</code> : 1e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c22</li>\n<li><code>amountLoaned</code> : 88</li>\n<li><code>blockHeight</code> : 1920</li>\n<li><code>lender</code> : 0014905df16bc248790676744bab063a1ae810803bd7</li>\n<li><code>borrower</code> : 0014929ec7d92f89d74716ba9591eaea588aa1867f75</li>\n</ul>\n<p>The instantiated contract program: <code>160014929ec7d92f89d74716ba9591eaea588aa1867f75160014905df16bc248790676744bab063a1ae810803bd70280070158201e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c227426557a641b000000007b7b51557ac16951c3c251557ac163260000007bcd9f6900c3c251567ac100c0</code></p>\n<p>The parameters of unlocking contract is as follows:</p>\n<ul>\n<li>\n<p><code>clause repay</code> unlock parameters :</p>\n<ul>\n<li><code>clause_selector</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">0</span>\n  }\n}\n</code></pre>\n<p>or</p>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"data\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-string\">\"00\"</span>\n  }\n}\n</code></pre>\n<ul>\n<li>the action of transaction for two consecutive <code>lock</code> statements : <code>lock amountLoaned of assetLoaned with lender</code> indicates that the unlocking account needs to pay the number of <code>amountLoaned</code> asset <code>assetLoaned</code> to the receiving program <code>lender</code>; <code>lock valueAmount of valueAsset with borrower</code> indicates that the unlocking account needs to pay the number of <code>valueAmount</code> asset <code>valueAsset</code> to the receiving program <code>borrower</code>. Please note that the above parameters must be strictly matched, otherwise the contract execution will fail.</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">88</span>,\n  <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"1e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c22\"</span>,\n  <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014905df16bc248790676744bab063a1ae810803bd7\"</span>,\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n},\n{\n  <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">700000000</span>,\n  <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"2ee76aeaa110308fcdfb382fa02a4a35823d5a589ffcaddb23f11f8a1fae3302\"</span>,\n  <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014929ec7d92f89d74716ba9591eaea588aa1867f75\"</span>,\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n},\n{\n  <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0G1JIR6400A02\"</span>,\n  <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">88</span>,\n  <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"1e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c22\"</span>,\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n}\n</code></pre>\n<p>The example of unlocking contract transaction:</p>\n<pre><code class=\"language-js\"><span class=\"hljs-comment\">// clause repay</span>\n{\n  <span class=\"hljs-string\">\"base_transaction\"</span>: <span class=\"hljs-literal\">null</span>,\n  <span class=\"hljs-string\">\"actions\"</span>: [\n    {\n      <span class=\"hljs-string\">\"output_id\"</span>: <span class=\"hljs-string\">\"3cf74c303558b7343cfa20b32ccddfd8e66293ae1970f7612ca6cb9a006e76bc\"</span>,\n      <span class=\"hljs-string\">\"arguments\"</span>: [\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">0</span>\n          }\n        }\n      ],\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account_unspent_output\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">88</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"1e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c22\"</span>,\n      <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014905df16bc248790676744bab063a1ae810803bd7\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    },怎么样\n    {\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">700000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"2ee76aeaa110308fcdfb382fa02a4a35823d5a589ffcaddb23f11f8a1fae3302\"</span>,\n      <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014929ec7d92f89d74716ba9591eaea588aa1867f75\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0G1JIR6400A02\"</span>,\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">88</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"1e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c22\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0G1JIR6400A02\"</span>,\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">20000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n    }\n  ],\n  <span class=\"hljs-string\">\"ttl\"</span>: <span class=\"hljs-number\">0</span>,\n  <span class=\"hljs-string\">\"time_range\"</span>: <span class=\"hljs-number\">1521625823</span>\n}\n</code></pre>\n</li>\n<li>\n<p><code>clause default</code> unlock parameters :</p>\n<ul>\n<li><code>clause_selector</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">1</span>\n  }\n}\n</code></pre>\n<p>or</p>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"data\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-string\">\"01\"</span>\n  }\n}\n</code></pre>\n<p>The example of unlocking contract transaction:(please note the <code>control_program</code> must be <code>lender</code>, otherwise will fail to execute)</p>\n<pre><code class=\"language-js\"><span class=\"hljs-comment\">// clause default</span>\n{\n  <span class=\"hljs-string\">\"base_transaction\"</span>: <span class=\"hljs-literal\">null</span>,\n  <span class=\"hljs-string\">\"actions\"</span>: [\n    {\n      <span class=\"hljs-string\">\"output_id\"</span>: <span class=\"hljs-string\">\"3cf74c303558b7343cfa20b32ccddfd8e66293ae1970f7612ca6cb9a006e76bc\"</span>,\n      <span class=\"hljs-string\">\"arguments\"</span>: [\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">1</span>\n          }\n        }\n      ],\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account_unspent_output\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">700000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"1e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c22\"</span>,\n      <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014905df16bc248790676744bab063a1ae810803bd7\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0G1JIR6400A02\"</span>,\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">20000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n    }\n  ],\n  <span class=\"hljs-string\">\"ttl\"</span>: <span class=\"hljs-number\">0</span>,\n  <span class=\"hljs-string\">\"time_range\"</span>: <span class=\"hljs-number\">1521625823</span>\n}\n</code></pre>\n</li>\n</ul>\n<h3>CallOption</h3>\n<p><code>CallOption</code> source code as follows：</p>\n<pre><code>contract CallOption(strikePrice: Amount,\n                  strikeCurrency: Asset,\n                  seller: Program,\n                  buyerKey: PublicKey,\n                  blockHeight: Integer) locks valueAmount of valueAsset {\n  clause exercise(buyerSig: Signature) {\n    verify below(blockHeight)\n    verify checkTxSig(buyerKey, buyerSig)\n    lock strikePrice of strikeCurrency with seller\n    unlock valueAmount of valueAsset\n  }\n  clause expire() {\n    verify above(blockHeight)\n    lock valueAmount of valueAsset with seller\n  }\n}\n</code></pre>\n<ul>\n<li>The binary: <code>557a6420000000547acda069547a547aae7cac69007c7b51547ac1632c000000547acd9f6900c3c251567ac1</code></li>\n<li>The instruction code: <code>5 ROLL JUMPIF:$expire $exercise FALSE ROT ROT 1 5 ROLL CHECKOUTPUT VERIFY 1 AMOUNT ASSET 1 5 ROLL CHECKOUTPUT JUMP:$_end $expire ROT BLOCKHEIGHT LESSTHAN VERIFY FALSE AMOUNT ASSET 1 6 ROLL CHECKOUTPUT $_end</code></li>\n</ul>\n<p>If the contract parameters are as follows:</p>\n<ul>\n<li><code>strikePrice</code> : 199</li>\n<li><code>strikeCurrency</code> : 1e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c22</li>\n<li><code>seller</code> : 0014905df16bc248790676744bab063a1ae810803bd7</li>\n<li><code>buyerKey</code> : e9108d3ca8049800727f6a3505b3a2710dc579405dde03c250f16d9a7e1e6e78</li>\n<li><code>blockHeight</code> : 3096</li>\n</ul>\n<p>The instantiated contract program: <code>02180c20e9108d3ca8049800727f6a3505b3a2710dc579405dde03c250f16d9a7e1e6e78160014905df16bc248790676744bab063a1ae810803bd7201e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c2201c7742c557a6420000000547acda069547a547aae7cac69007c7b51547ac1632c000000547acd9f6900c3c251567ac100c0</code></p>\n<p>The parameters of unlocking contract is as follows:</p>\n<ul>\n<li>\n<p><code>clause exercise</code> unlock parameters :</p>\n<ul>\n<li><code>buyerSig</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"raw_tx_signature\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"xpub\"</span>: <span class=\"hljs-string\">\"5c6145b241b1147987565719657a0506ebb417a2e110a235a42cfb40951880f447432f930ce9fd1a6b7e51b3ddbfdc7adb57d33448f93c0defb4de630703a144\"</span>,\n    <span class=\"hljs-string\">\"derivation_path\"</span>: [\n      <span class=\"hljs-string\">\"010100000000000000\"</span>,\n      <span class=\"hljs-string\">\"0100000000000000\"</span>\n    ]\n  }\n}\n</code></pre>\n<ul>\n<li><code>clause_selector</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">0</span>\n  }\n}\n</code></pre>\n<p>or</p>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"data\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-string\">\"00\"</span>\n  }\n}\n</code></pre>\n<ul>\n<li>The action of transaction for the <code>lock</code> statement: <code>lock strikePrice of strikeCurrency with seller</code> indicates that the unlocking account needs to pay the number of <code>strikePrice</code> asset <code>strikeCurrency</code> to the receiving program <code>seller</code>. Please note that the above parameters must be strictly matched, otherwise the contract execution will fail.</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">199</span>,\n  <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"1e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c22\"</span>,\n  <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014c5a5b563c4623018557fb299259542b8739f6bc2\"</span>,\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n},\n{\n  <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0G1JIR6400A02\"</span>,\n  <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">199</span>,\n  <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"1e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c22\"</span>,\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n}\n</code></pre>\n<p>The parameters corresponding to unlocking contract are as follows:</p>\n<pre><code class=\"language-js\"><span class=\"hljs-comment\">// clause exercise</span>\n{\n  <span class=\"hljs-string\">\"base_transaction\"</span>: <span class=\"hljs-literal\">null</span>,\n  <span class=\"hljs-string\">\"actions\"</span>: [\n    {\n      <span class=\"hljs-string\">\"output_id\"</span>: <span class=\"hljs-string\">\"7afa15ad39356a7e6dc363fba823146ecb0132967f067ddfa13494a34a984518\"</span>,\n      <span class=\"hljs-string\">\"arguments\"</span>: [\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"raw_tx_signature\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"xpub\"</span>: <span class=\"hljs-string\">\"5c6145b241b1147987565719657a0506ebb417a2e110a235a42cfb40951880f447432f930ce9fd1a6b7e51b3ddbfdc7adb57d33448f93c0defb4de630703a144\"</span>,\n            <span class=\"hljs-string\">\"derivation_path\"</span>: [\n              <span class=\"hljs-string\">\"010100000000000000\"</span>,\n              <span class=\"hljs-string\">\"0100000000000000\"</span>\n            ]\n          }\n        },\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">0</span>\n          }\n        }\n      ],\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account_unspent_output\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">199</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"1e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c22\"</span>,\n      <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014c5a5b563c4623018557fb299259542b8739f6bc2\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0G1JIR6400A02\"</span>,    - The action <span class=\"hljs-keyword\">of</span> transaction <span class=\"hljs-keyword\">for</span> the <span class=\"hljs-string\">`lock`</span> statement: <span class=\"hljs-string\">`lock amountRequested of assetRequested with seller`</span> indicates that the unlocking account needs to pay the number <span class=\"hljs-keyword\">of</span> <span class=\"hljs-string\">`amountRequested`</span> asset <span class=\"hljs-string\">`assetRequested`</span> to the receiving program <span class=\"hljs-string\">`seller`</span>. Please note that the above parameters must be strictly matched, otherwise the contract execution will fail.\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">199</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"1e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c22\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0G1JIR6400A02\"</span>,\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">20000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">800000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"2a1861ba3a5f7bbdb98392b33289465b462fe8e9d4b9c00f78cbcb1ac20fa93f\"</span>,\n      <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014905df16bc248790676744bab063a1ae810803bd7\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    }\n  ],\n  <span class=\"hljs-string\">\"ttl\"</span>: <span class=\"hljs-number\">0</span>,\n  <span class=\"hljs-string\">\"time_range\"</span>: <span class=\"hljs-number\">1521625823</span>\n}\n</code></pre>\n</li>\n<li>\n<p><code>clause expire</code> unlock patameters :</p>\n<ul>\n<li><code>clause_selector</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">1</span>\n  }\n}\n</code></pre>\n<p>or</p>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"data\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-string\">\"01\"</span>\n  }\n}\n</code></pre>\n<p>The example of unlocking contract transaction: (please note the <code>control_program</code> must be <code>seller</code>,otherwise will fail to execute)</p>\n<pre><code class=\"language-js\"><span class=\"hljs-comment\">// clause expire</span>\n{\n  <span class=\"hljs-string\">\"base_transaction\"</span>: <span class=\"hljs-literal\">null</span>,\n  <span class=\"hljs-string\">\"actions\"</span>: [\n    {\n      <span class=\"hljs-string\">\"output_id\"</span>: <span class=\"hljs-string\">\"7afa15ad39356a7e6dc363fba823146ecb0132967f067ddfa13494a34a984518\"</span>,\n      <span class=\"hljs-string\">\"arguments\"</span>: [\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">1</span>\n          }\n        }\n      ],\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account_unspent_output\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">800000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"1e074b22ed7ae8470c7ba5d8a7bc95e83431a753a17465e8673af68a82500c22\"</span>,\n      <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014905df16bc248790676744bab063a1ae810803bd7\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0G1JIR6400A02\"</span>,\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">20000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n    }\n  ],\n  <span class=\"hljs-string\">\"ttl\"</span>: <span class=\"hljs-number\">0</span>,\n  <span class=\"hljs-string\">\"time_range\"</span>: <span class=\"hljs-number\">1521625823</span>\n}\n</code></pre>\n</li>\n</ul>\n<h3>PriceChanger</h3>\n<p><code>PriceChanger</code> source code as follows:</p>\n<pre><code>contract PriceChanger(askAmount: Amount, askAsset: Asset, sellerKey: PublicKey, sellerProg: Program) locks valueAmount of valueAsset {\n  clause changePrice(newAmount: Amount, newAsset: Asset, sig: Signature) {\n    verify checkTxSig(sellerKey, sig)\n    lock valueAmount of valueAsset with PriceChanger(newAmount, newAsset, sellerKey, sellerProg)\n  }\n  clause redeem() {\n    lock askAmount of askAsset with sellerProg\n    unlock valueAmount of valueAsset\n  }\n}\n</code></pre>\n<ul>\n<li>The binary: <code>557a6432000000557a5479ae7cac6900c3c25100597a89587a89587a89587a89557a890274787e008901c07ec1633a000000007b537a51567ac1</code></li>\n<li>The instruction code: <code>5 05 ROLL JUMPIF:$redeem $changePrice 5 05 ROLL 4 04 PICK TXSIGHASH SWAP CHECKSIG VERIFY FALSE AMOUNT ASSET 1 01 FALSE 9 09 ROLL CATPUSHDATA 8 08 ROLL CATPUSHDATA 8 08 ROLL CATPUSHDATA 8 08 ROLL CATPUSHDATA 5 05 ROLL CATPUSHDATA DATA_2 7478 CAT FALSE CATPUSHDATA DATA_1 c0 CAT CHECKOUTPUT JUMP:$_end $redeem FALSE ROT 3 03 ROLL 1 01 6 06 ROLL CHECKOUTPUT $_end</code></li>\n</ul>\n<p>If the contract parameters is as follows:</p>\n<ul>\n<li><code>askAmount</code> : 20000</li>\n<li><code>askAsset</code> : c6b12af8326df37b8d77c77bfa2547e083cbacde15cc48da56d4aa4e4235a3ee</li>\n<li><code>sellerKey</code> : 055539eb36abcaaf127c63ae20e3d049cd28d0f1fe569df84da3aedb018ca1bf</li>\n<li><code>sellerProg</code> : 0014dedfd406c591aa221a047a260107f877da92fec5</li>\n</ul>\n<p>The instantiated contract program:\n<code>160014dedfd406c591aa221a047a260107f877da92fec520055539eb36abcaaf127c63ae20e3d049cd28d0f1fe569df84da3aedb018ca1bf20c6b12af8326df37b8d77c77bfa2547e083cbacde15cc48da56d4aa4e4235a3ee02204e3a557a6432000000557a5479ae7cac6900c3c25100597a89587a89587a89587a89557a890274787e008901c07ec1633a000000007b537a51567ac1747800c0</code></p>\n<p>The parameters of unlocking contract is as follows:</p>\n<ul>\n<li>\n<p><code>clause changePrice</code> unlock patameters :</p>\n<ul>\n<li><code>newAmount</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">10000</span>\n  }\n}\n</code></pre>\n<ul>\n<li><code>newAsset</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"data\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-string\">\"3addca837514d599c509aed802c0b7671838b363a298cbcb0acb06bc24076cf4\"</span>\n  }\n}\n</code></pre>\n<ul>\n<li><code>sig</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"raw_tx_signature\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"xpub\"</span>: <span class=\"hljs-string\">\"a4d4f09a04371516d37e1d27f92c9cb41e4b1e7f62762cf23ed3904a9dfd2d794195862fffd00bf7ac373e5891c8d2eb660dc5ff9c040ec4e01f973bbfd31c23\"</span>,\n    <span class=\"hljs-string\">\"derivation_path\"</span>: [\n      <span class=\"hljs-string\">\"010100000000000000\"</span>,\n      <span class=\"hljs-string\">\"0100000000000000\"</span>\n    ]\n  }\n}\n</code></pre>\n<ul>\n<li><code>clause_selector</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">0</span>\n  }\n}\n</code></pre>\n<p>After the contract parameter is constructed, you need to specify the receiving object in the contract <code>lock</code> statement. <code>lock valueAmount of valueAsset with PriceChanger(newAmount, newAsset, sellerKey, sellerProg)</code> statement indicates that the unlocked value is relocked into the new contract object, the receiver is instantiated contract program with parameters is that：</p>\n<ul>\n<li><code>newAmount</code> : 10000</li>\n<li><code>newAsset</code> : 3addca837514d599c509aed802c0b7671838b363a298cbcb0acb06bc24076cf4</li>\n<li><code>sellerKey</code> : 055539eb36abcaaf127c63ae20e3d049cd28d0f1fe569df84da3aedb018ca1bf</li>\n<li><code>sellerProg</code> : 0014dedfd406c591aa221a047a260107f877da92fec5</li>\n</ul>\n<p> \nThe instantiated contract program:<br>\n<code>160014dedfd406c591aa221a047a260107f877da92fec520055539eb36abcaaf127c63ae20e3d049cd28d0f1fe569df84da3aedb018ca1bf203addca837514d599c509aed802c0b7671838b363a298cbcb0acb06bc24076cf40210273a557a6432000000557a5479ae7cac6900c3c25100597a89587a89587a89587a89557a890274787e008901c07ec1633a000000007b537a51567ac1747800c0</code></p>\n<p> \nThe example of unlocking contract transaction:</p>\n<pre><code class=\"language-js\"><span class=\"hljs-comment\">// clause changePrice</span>\n{\n<span class=\"hljs-string\">\"base_transaction\"</span>: <span class=\"hljs-literal\">null</span>,\n<span class=\"hljs-string\">\"actions\"</span>: [\n    {\n    <span class=\"hljs-string\">\"output_id\"</span>: <span class=\"hljs-string\">\"31feac2f482f48dd99117569a3148d1b84211d41b64a980dc9ec37bda922b0c8\"</span>,\n    <span class=\"hljs-string\">\"arguments\"</span>: [\n        {\n        <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n        <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">10000</span>\n        }\n        },\n        {\n        <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"data\"</span>,\n        <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-string\">\"3addca837514d599c509aed802c0b7671838b363a298cbcb0acb06bc24076cf4\"</span>\n        }\n        },\n        {\n        <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"raw_tx_signature\"</span>,\n        <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"xpub\"</span>: <span class=\"hljs-string\">\"a4d4f09a04371516d37e1d27f92c9cb41e4b1e7f62762cf23ed3904a9dfd2d794195862fffd00bf7ac373e5891c8d2eb660dc5ff9c040ec4e01f973bbfd31c23\"</span>,\n            <span class=\"hljs-string\">\"derivation_path\"</span>: [\n            <span class=\"hljs-string\">\"010100000000000000\"</span>,\n            <span class=\"hljs-string\">\"0100000000000000\"</span>\n            ]\n        }\n        },\n        {\n        <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n        <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">0</span>\n        }\n        }\n    ],\n    <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account_unspent_output\"</span>\n    },\n    {\n    <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">900</span>,\n    <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"2a62180553e70131f668639116d6d1e29417537766b5244cbe49fa6b36c5d7b0\"</span>,\n    <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"160014dedfd406c591aa221a047a260107f877da92fec520055539eb36abcaaf127c63ae20e3d049cd28d0f1fe569df84da3aedb018ca1bf203addca837514d599c509aed802c0b7671838b363a298cbcb0acb06bc24076cf40210273a557a6432000000557a5479ae7cac6900c3c25100597a89587a89587a89587a89557a890274787e008901c07ec1633a000000007b537a51567ac1747800c0\"</span>,\n    <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    },\n    {\n    <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0ILGLSTC00A02\"</span>,\n    <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">20000000</span>,\n    <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\"</span>,\n    <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n    }\n],\n<span class=\"hljs-string\">\"ttl\"</span>: <span class=\"hljs-number\">0</span>,\n<span class=\"hljs-string\">\"time_range\"</span>: <span class=\"hljs-number\">1521625823</span>\n}\n</code></pre>\n</li>\n<li>\n<p><code>clause redeem</code> unlock patameters :</p>\n<ul>\n<li><code>clause_selector</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">1</span>\n  }\n}\n</code></pre>\n<p>The example of unlocking contract transaction:</p>\n<pre><code class=\"language-js\"><span class=\"hljs-comment\">// clause redeem</span>\n{\n  <span class=\"hljs-string\">\"base_transaction\"</span>: <span class=\"hljs-literal\">null</span>,\n  <span class=\"hljs-string\">\"actions\"</span>: [\n    {\n      <span class=\"hljs-string\">\"output_id\"</span>: <span class=\"hljs-string\">\"31feac2f482f48dd99117569a3148d1b84211d41b64a980dc9ec37bda922b0c8\"</span>,\n      <span class=\"hljs-string\">\"arguments\"</span>: [\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">1</span>\n          }\n        }\n      ],\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account_unspent_output\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">20000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"c6b12af8326df37b8d77c77bfa2547e083cbacde15cc48da56d4aa4e4235a3ee\"</span>,\n      <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014dedfd406c591aa221a047a260107f877da92fec5\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0JPC5DBOG0A02\"</span>,\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">20000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"c6b12af8326df37b8d77c77bfa2547e083cbacde15cc48da56d4aa4e4235a3ee\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0JPC5DBOG0A02\"</span>,\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">20000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">900</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"2a62180553e70131f668639116d6d1e29417537766b5244cbe49fa6b36c5d7b0\"</span>,\n      <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014bf54f5adbbd2dc11bffb50277b5a993cec75e924\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    }\n  ],\n  <span class=\"hljs-string\">\"ttl\"</span>: <span class=\"hljs-number\">0</span>,\n  <span class=\"hljs-string\">\"time_range\"</span>: <span class=\"hljs-number\">1521625823</span>\n}\n</code></pre>\n</li>\n</ul>\n<h3>PartLoanCollateral</h3>\n<p><code>PartLoanCollateral</code> source code as follows:</p>\n<pre><code>contract PartLoanCollateral(assetLoaned: Asset,\n                        amountLoaned: Amount,\n                        blockHeight: Integer,\n                        lender: Program,\n                        borrower: Program) locks valueAmount of valueAsset {\n  clause repay(amountPartLoaned: Amount) {\n    if amountPartLoaned &gt; 0 &amp;&amp; amountPartLoaned &lt; amountLoaned {\n      lock amountPartLoaned of assetLoaned with lender\n      lock valueAmount*amountPartLoaned/amountLoaned of valueAsset with borrower\n      lock valueAmount-(valueAmount*amountPartLoaned/amountLoaned) of valueAsset with PartLoanCollateral(assetLoaned, amountLoaned-amountPartLoaned, blockHeight, lender, borrower)\n    } else {\n      lock amountLoaned of assetLoaned with lender\n      lock valueAmount of valueAsset with borrower\n    }\n  }\n  clause default() {\n    verify above(blockHeight)\n    lock valueAmount of valueAsset with lender\n  }\n}\n</code></pre>\n<ul>\n<li>The binary:\n<code>567a6477000000567900a0577954799f9a916164630000000057795379515879c16951c3587995547996c2515979c16952c3767c59799555799694c251005a798959798958798957795c7994895679895579890274787e008901c07ec16963720000000070515879c16951c3c2515979c1696383000000537acd9f6900c3c251577ac1</code></li>\n<li>The instruction code: <code>6 06 ROLL JUMPIF:$default $repay 6 06 PICK FALSE GREATERTHAN 7 07 PICK 4 04 PICK LESSTHAN BOOLAND NOT NOP JUMPIF 63000000 FALSE 7 07 PICK 3 03 PICK 1 01 8 08 PICK CHECKOUTPUT VERIFY 1 01 AMOUNT 8 08 PICK MUL 4 04 PICK DIV ASSET 1 01 9 09 PICK CHECKOUTPUT VERIFY 2 02 AMOUNT DUP SWAP 9 09 PICK MUL 5 05 PICK DIV SUB ASSET 1 01 FALSE 10 0a PICK CATPUSHDATA 9 09 PICK CATPUSHDATA 8 08 PICK CATPUSHDATA 7 07 PICK 12 0c PICK SUB CATPUSHDATA 6 06 PICK CATPUSHDATA 5 05 PICK CATPUSHDATA DATA_2 7478 CAT FALSE CATPUSHDATA DATA_1 c0 CAT CHECKOUTPUT VERIFY JUMP 72000000 FALSE 2OVER 1 01 8 08 PICK CHECKOUTPUT VERIFY 1 01 AMOUNT ASSET 1 01 9 09 PICK CHECKOUTPUT VERIFY JUMP:$_end $default 3 03 ROLL BLOCKHEIGHT LESSTHAN VERIFY FALSE AMOUNT ASSET 1 01 7 07 ROLL CHECKOUTPUT $_end</code></li>\n</ul>\n<p>If the contract parameters is as follows:</p>\n<ul>\n<li><code>assetLoaned</code> : c6b12af8326df37b8d77c77bfa2547e083cbacde15cc48da56d4aa4e4235a3ee</li>\n<li><code>amountLoaned</code> : 8000</li>\n<li><code>blockHeight</code> : 1900</li>\n<li><code>lender</code> : 0014dedfd406c591aa221a047a260107f877da92fec5</li>\n<li><code>borrower</code> : 0014bf54f5adbbd2dc11bffb50277b5a993cec75e924</li>\n</ul>\n<p>The instantiated contract program: <code>160014bf54f5adbbd2dc11bffb50277b5a993cec75e924160014dedfd406c591aa221a047a260107f877da92fec5026c0702401f20c6b12af8326df37b8d77c77bfa2547e083cbacde15cc48da56d4aa4e4235a3ee4c83567a6477000000567900a0577954799f9a916164630000000057795379515879c16951c3587995547996c2515979c16952c3767c59799555799694c251005a798959798958798957795c7994895679895579890274787e008901c07ec16963720000000070515879c16951c3c2515979c1696383000000537acd9f6900c3c251577ac1747800c0</code></p>\n<p>The parameters of unlocking contract is as follows:</p>\n<ul>\n<li>\n<p><code>clause changePrice</code> unlock patameters :</p>\n<ul>\n<li><code>amountPartLoaned</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">2000</span>\n  }\n}\n</code></pre>\n<ul>\n<li><code>clause_selector</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">0</span>\n  }\n}\n</code></pre>\n<p>The <code>if-else</code> statement block of the contract contains the <code>lock</code> statement, besides the number of <code>lock</code> statements below the <code>if</code> statement is different from the number of <code>lock</code> statements under the <code>else</code> statement, therefore the execution process needs to be pre-judged before unlocked the contract. The execution process is under the <code>if</code> statement block when <code>amountPartLoaned</code> is equal to 2000 which is less than <code>amountLoaned</code> with 8000, otherwise it's the <code>else</code> statement block. furthermore, the numeric expression in the lock statement needs to be calculated by the user before using it. If the locked value <code>valueAmount</code> is 3000, then the <code>valueAmount*amountPartLoaned/amountLoaned</code> is 750 and the <code>valueAmount-(valueAmount*amountPartLoaned/amountLoaned)</code> is 2250. finally, <code>lock valueAmount of valueAsset with PriceChanger(newAmount, newAsset, sellerKey, sellerProg)</code> statement indicates that the unlocked value is relocked into the new contract object, the receiver is instantiated contract program with parameters is that：</p>\n<ul>\n<li><code>assetLoaned</code> : c6b12af8326df37b8d77c77bfa2547e083cbacde15cc48da56d4aa4e4235a3ee</li>\n<li><code>amountLoaned</code> : 6000</li>\n<li><code>blockHeight</code> : 1900</li>\n<li><code>lender</code> : 0014dedfd406c591aa221a047a260107f877da92fec5</li>\n<li><code>borrower</code> : 0014bf54f5adbbd2dc11bffb50277b5a993cec75e924</li>\n</ul>\n<p> \nThe instantiated contract program:\n<code>160014bf54f5adbbd2dc11bffb50277b5a993cec75e924160014dedfd406c591aa221a047a260107f877da92fec5026c0702701720c6b12af8326df37b8d77c77bfa2547e083cbacde15cc48da56d4aa4e4235a3ee4c83567a6477000000567900a0577954799f9a916164630000000057795379515879c16951c3587995547996c2515979c16952c3767c59799555799694c251005a798959798958798957795c7994895679895579890274787e008901c07ec16963720000000070515879c16951c3c2515979c1696383000000537acd9f6900c3c251577ac1747800c0</code></p>\n<p> \nThe example of unlocking contract transaction:</p>\n<pre><code class=\"language-js\"><span class=\"hljs-comment\">// clause repay</span>\n{\n  <span class=\"hljs-string\">\"base_transaction\"</span>: <span class=\"hljs-literal\">null</span>,\n  <span class=\"hljs-string\">\"actions\"</span>: [\n    {\n      <span class=\"hljs-string\">\"output_id\"</span>: <span class=\"hljs-string\">\"a80552a346e271aaa7c71d0fa362a6b02aa844bb71a72934db64bc2b9906d0b9\"</span>,\n      <span class=\"hljs-string\">\"arguments\"</span>: [\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">2000</span>\n          }\n        },\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">0</span>\n          }\n        }\n      ],\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account_unspent_output\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">2000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"c6b12af8326df37b8d77c77bfa2547e083cbacde15cc48da56d4aa4e4235a3ee\"</span>,\n      <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014dedfd406c591aa221a047a260107f877da92fec5\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">750</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"2a62180553e70131f668639116d6d1e29417537766b5244cbe49fa6b36c5d7b0\"</span>,\n      <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014bf54f5adbbd2dc11bffb50277b5a993cec75e924\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">2250</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"2a62180553e70131f668639116d6d1e29417537766b5244cbe49fa6b36c5d7b0\"</span>,\n      <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"160014bf54f5adbbd2dc11bffb50277b5a993cec75e924160014dedfd406c591aa221a047a260107f877da92fec5026c0702701720c6b12af8326df37b8d77c77bfa2547e083cbacde15cc48da56d4aa4e4235a3ee4c83567a6477000000567900a0577954799f9a916164630000000057795379515879c16951c3587995547996c2515979c16952c3767c59799555799694c251005a798959798958798957795c7994895679895579890274787e008901c07ec16963720000000070515879c16951c3c2515979c1696383000000537acd9f6900c3c251577ac1747800c0\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0JPC5DBOG0A02\"</span>,\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">2000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"c6b12af8326df37b8d77c77bfa2547e083cbacde15cc48da56d4aa4e4235a3ee\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0JPC5DBOG0A02\"</span>,\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">20000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n    }\n  ],\n  <span class=\"hljs-string\">\"ttl\"</span>: <span class=\"hljs-number\">0</span>,\n  <span class=\"hljs-string\">\"time_range\"</span>: <span class=\"hljs-number\">1521625823</span>\n}\n</code></pre>\n<p>The execution process is the <code>else</code> block when the <code>amountPartLoaned</code> greater than or equal to the <code>amountLoaned</code> which value is 8000, the example of unlocking contract transaction:</p>\n<pre><code class=\"language-js\"><span class=\"hljs-comment\">// clause repay</span>\n{\n  <span class=\"hljs-string\">\"base_transaction\"</span>: <span class=\"hljs-literal\">null</span>,\n  <span class=\"hljs-string\">\"actions\"</span>: [\n    {\n      <span class=\"hljs-string\">\"output_id\"</span>: <span class=\"hljs-string\">\"a80552a346e271aaa7c71d0fa362a6b02aa844bb71a72934db64bc2b9906d0b9\"</span>,\n      <span class=\"hljs-string\">\"arguments\"</span>: [\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">8000</span>\n          }\n        },\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">0</span>\n          }\n        }\n      ],\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account_unspent_output\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">8000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"c6b12af8326df37b8d77c77bfa2547e083cbacde15cc48da56d4aa4e4235a3ee\"</span>,\n      <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014dedfd406c591aa221a047a260107f877da92fec5\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">3000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"2a62180553e70131f668639116d6d1e29417537766b5244cbe49fa6b36c5d7b0\"</span>,\n      <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014bf54f5adbbd2dc11bffb50277b5a993cec75e924\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0JPC5DBOG0A02\"</span>,\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">8000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"c6b12af8326df37b8d77c77bfa2547e083cbacde15cc48da56d4aa4e4235a3ee\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0JPC5DBOG0A02\"</span>,\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">20000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n    }\n  ],\n  <span class=\"hljs-string\">\"ttl\"</span>: <span class=\"hljs-number\">0</span>,\n  <span class=\"hljs-string\">\"time_range\"</span>: <span class=\"hljs-number\">1521625823</span>\n}\n</code></pre>\n</li>\n<li>\n<p><code>clause default</code> unlock patameters :</p>\n<ul>\n<li><code>clause_selector</code> :</li>\n</ul>\n<pre><code class=\"language-js\">{\n  <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n  <span class=\"hljs-string\">\"raw_data\"</span>: {\n    <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">1</span>\n  }\n}\n</code></pre>\n<p>The example of unlocking contract transaction:</p>\n<pre><code class=\"language-js\"><span class=\"hljs-comment\">// clause default</span>\n{\n  <span class=\"hljs-string\">\"base_transaction\"</span>: <span class=\"hljs-literal\">null</span>,\n  <span class=\"hljs-string\">\"actions\"</span>: [\n    {\n      <span class=\"hljs-string\">\"output_id\"</span>: <span class=\"hljs-string\">\"a80552a346e271aaa7c71d0fa362a6b02aa844bb71a72934db64bc2b9906d0b9\"</span>,\n      <span class=\"hljs-string\">\"arguments\"</span>: [\n        {\n          <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"integer\"</span>,\n          <span class=\"hljs-string\">\"raw_data\"</span>: {\n            <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-number\">1</span>\n          }\n        }\n      ],\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account_unspent_output\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">3000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"2a62180553e70131f668639116d6d1e29417537766b5244cbe49fa6b36c5d7b0\"</span>,\n      <span class=\"hljs-string\">\"control_program\"</span>: <span class=\"hljs-string\">\"0014905df16bc248790676744bab063a1ae810803bd7\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"control_program\"</span>\n    },\n    {\n      <span class=\"hljs-string\">\"account_id\"</span>: <span class=\"hljs-string\">\"0ILGLSTC00A02\"</span>,\n      <span class=\"hljs-string\">\"amount\"</span>: <span class=\"hljs-number\">20000000</span>,\n      <span class=\"hljs-string\">\"asset_id\"</span>: <span class=\"hljs-string\">\"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\"</span>,\n      <span class=\"hljs-string\">\"type\"</span>: <span class=\"hljs-string\">\"spend_account\"</span>\n    }\n  ],\n  <span class=\"hljs-string\">\"ttl\"</span>: <span class=\"hljs-number\">0</span>,\n  <span class=\"hljs-string\">\"time_range\"</span>: <span class=\"hljs-number\">1521625823</span>\n}\n</code></pre>\n</li>\n</ul>\n",
  "link": "/en-us/docs/22_contract_template.html",
  "meta": {}
}