<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="keywords" content="13_architecture_overview" />
	<meta name="description" content="13_architecture_overview" />
	<!-- 网页标签标题 -->
	<title>13_architecture_overview</title>
	<link rel="shortcut icon" href="/img/docsite.ico"/>
	<link rel="stylesheet" href="/build/documentation.css" />
</head>
<body>
	<div id="root"><div class="documentation-page" data-reactroot=""><header class="header-container header-container-normal"><div class="header-body"><a href="/zh-cn/index.html"><img class="logo" src="/img/dubbo_colorful.png"/></a><div class="search search-normal"><span class="icon-search"></span></div><span class="language-switch language-switch-normal">En</span><div class="header-menu"><img class="header-menu-toggle" src="/img/system/menu_gray.png"/><ul><li class="menu-item menu-item-normal menu-item-normal-active"><a href="/zh-cn/docs/00_index.html" target="_self">文档</a></li></ul></div></div></header><div class="bar"><div class="bar-body"><img src="/img/system/docs.png" class="front-img"/><span>文档</span><img src="/img/system/docs.png" class="back-img"/></div></div><section class="content-section"><div class="sidemenu"><div class="sidemenu-toggle"><img src="https://img.alicdn.com/tfs/TB1E6apXHGYBuNjy0FoXXciBFXa-200-200.png"/></div><ul><li class="menu-item menu-item-level-1"><span>认识比原</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/00_index.html" target="_self">概述</a></li><li style="height:288px;overflow:hidden" class="menu-item menu-item-level-2"><span>设计原理和架构<img style="transform:rotate(0deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/13_architecture_overview.html" target="_self">整体架构概览</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/14_key.html" target="_self">秘钥</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/15_address.html" target="_self">地址</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/16_account.html" target="_self">账户</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/17_transaction.html" target="_self">交易</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/18_block.html" target="_self">区块</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/19_utxo.html" target="_self">UTXO</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/20_consensus.html" target="_self">共识算法</a></li><li style="height:180px;overflow:hidden" class="menu-item menu-item-level-2"><span>智能合约<img style="transform:rotate(0deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/22_smart_contract_overview.html" target="_self">概述</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/23_smart_contract_build.html" target="_self">构造流程</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/24_contract_operator.html" target="_self">操作符介绍</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/25_contract_template.html" target="_self">合约模板</a></li></ul></li><li style="height:108px;overflow:hidden" class="menu-item menu-item-level-2"><span>侧链<img style="transform:rotate(0deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/30_sidechain_overview.html" target="_self">概述</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/31_sidechain.html" target="_self">配置节点</a></li></ul></li></ul></li><li class="menu-item menu-item-level-1"><span>开发者指南</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/06_build_environment.html" target="_self">搭建开发环境</a></li><li style="height:108px;overflow:hidden" class="menu-item menu-item-level-2"><span>编译运行全节点<img style="transform:rotate(0deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/07_compile_and_run_node.html" target="_self">安装与运行</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/demo2.html" target="_self">docker运行比原全节点</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/08_rpc_call.html" target="_self">全节点RPC接口调用</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/09_ws_call.html" target="_self">Websocket使用说明</a></li></ul></li><li class="menu-item menu-item-level-1"><span>快速学习</span><ul><li style="height:144px;overflow:hidden" class="menu-item menu-item-level-2"><span>DAPP开发指南<img style="transform:rotate(0deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/dapp/1_dapp.html" target="_self">安装与运行</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/dapp/2_dapp.html" target="_self">配置节点</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/dapp/3_dapp.html" target="_self">命令行工具</a></li></ul></li><li style="height:144px;overflow:hidden" class="menu-item menu-item-level-2"><span>开发资料集合<img style="transform:rotate(0deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/collection/1_collection.html" target="_self">文档</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/collection/2_collection.html" target="_self">配置节点</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/collection/3_collection.html" target="_self">命令行工具</a></li></ul></li></ul></li><li class="menu-item menu-item-level-1"><span>对接指南</span><ul><li style="height:144px;overflow:hidden" class="menu-item menu-item-level-2"><span>交易所对接指南<img style="transform:rotate(0deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/exchange/1_exchange.html" target="_self">安装与运行</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/exchange/2_exchange.html" target="_self">配置节点</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/exchange/3_exchange.html" target="_self">配置节点</a></li></ul></li><li style="height:144px;overflow:hidden" class="menu-item menu-item-level-2"><span>钱包所对接指南<img style="transform:rotate(0deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/wallet/1_wallet.html" target="_self">安装与运行</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/wallet/2_wallet.html" target="_self">配置节点</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/wallet/3_wallet.html" target="_self">开始挖矿</a></li></ul></li></ul></li><li class="menu-item menu-item-level-1"><span>SDK集锦</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/10_other_sdk.html" target="_self">第三方SDK</a></li></ul></li><li class="menu-item menu-item-level-1"><span>生态圈</span><ul><li style="height:180px;overflow:hidden" class="menu-item menu-item-level-2"><span>比原生态<img style="transform:rotate(0deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/26_wallet.html" target="_self">全节点钱包</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/27_ligth_wallet.html" target="_self">轻钱包</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/28_block_explorer.html" target="_self">区块链浏览器</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/29_mining_pool.html" target="_self">矿池</a></li></ul></li><li style="height:72px;overflow:hidden" class="menu-item menu-item-level-2"><span>落地应用<img style="transform:rotate(0deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/application/1_application.html" target="_self">应用</a></li></ul></li></ul></li></ul></div><div class="doc-content markdown-body"><h1>整体架构概览</h1>
<p><img src="./img/bytom_overview.png" alt=""></p>
<p>比原链分为三个层次
第一层就是大家接触比较多的钱包层，就是进行收款和打款的模块，钱包一般带操作界面，大家都可以日常使用，所以会比较熟悉。
然后就是最核心的内核层，内核可以理解为分布式系统中每个节点认同的一套规则，只有有相同的规则，两个节点才能达成一致。如果规则不同，其实就是发生分叉了。
最后一层是通信层，通信层是节点之间交换信息的方式，包含区块同步，交易同步等。</p>
<p><img src="./img/bytom_core.png" alt=""></p>
<p>首先来看内核层，内核层主要由五个模块构成：</p>
<ul>
<li>孤儿块管理：孤儿块就是由矿工挖出但未成为主链区块的区块（在相同高度产生2个甚至更多的合法区块，一个区块成为主链，剩下的则称为孤儿块），孤儿块管理就是将未成为主链区块的孤儿块存储起来。</li>
<li>共识层：确认一个块是否合法。分为区块头验证和交易验证。区块头验证需要验证它的父块和时间戳，同是需要算力来保证记账权利。交易验证比原特别的设计了一层BC层，这层在交易验证时会获得更好的性能，交易验证还和智能合约相关，交易被验证时参数会参入虚拟机验证该交易是否合法。</li>
<li>区块树管理：又成为Block Index，作用是记录全网所有的块，保存了全网所有块的一张镜像图。因为有孤儿块，所有它并不是链式结构的，会有分叉的情况，所以称为区块树</li>
<li>数据存储：将区块数据做持久化存储。包含两种数据，第一种是区块数据，会在网络上进行广播的原生区块信息；第二种是UTXO数据，存储UTXO数据是为了更快的验证一笔UTXO是否可以花费，而不需要去遍历所有区块信息</li>
<li>交易池：维护了所有全网发出的但是还未被确认的交易。跟它关联最大的是挖矿模块，挖矿模块每次要产生一个新区块的时候，它会从交易池拿一些交易打包成块，然后用Tensority共识算法进行工作量验算</li>
</ul>
<p><img src="./img/bytom_wallet.png" alt=""></p>
<p>然后来说一下钱包层：</p>
<ul>
<li>私钥模块：主要用于管理私钥（私钥的生成，存储，备份等）和签名</li>
<li>账户模块：在比原的设计中，使用了账户-地址-密钥三层体系，每个人可以拥有多把私钥，通过私钥不同的组合形式形成账户，每个账户可以又无限多个地址，地址是由账户的私钥派生出的二级私钥形成的地址，使用多地址可以更好的保护用户的隐私。</li>
<li>资产模块：管理账户下创建资产的模块，任何issue的资产都是在这个模块中交互。</li>
<li>交易模块：可以理解成跟我相关的交易数据，它主要做了两件事：
<ul>
<li>将和你相关的交易从所有交易中筛选出来</li>
<li>维护钱包层UTXO的数据库，记录本人所拥有的UTXO</li>
</ul>
</li>
</ul>
<p><img src="./img/bytom_network.png" alt=""></p>
<p>最后说一下通讯层：</p>
<ul>
<li>节点发现：P2P相关，是非常独立和成熟的一块，通过节点发现这个模块获得种子节点，然后通过种子节点来获取其他更多的节点。</li>
<li>交易同步：在各个节点之间同步交易。</li>
<li>区块同步：又称为被动区块同步，如果发现存在区块高度高于自己的其他节点时，不断请求区块同步。</li>
<li>新区块快速广播模块：新区块主动同步，当挖到一个新的区块时进行强制广播，从而更快的在全网传播。</li>
</ul>
</div></section><footer class="footer-container"><div class="footer-body"><img src="/img/dubbo_gray.png"/><div class="cols-container"><div class="col col-12"><h3>友情提示</h3><p>如果文档编辑有错误，请联系我们!</p></div><div class="col col-6"><dl><dt>文档</dt><dd><a href="/zh-cn/docs/00_index.html" target="_self">Overview</a></dd><dd><a href="/zh-cn/docs/13_architecture_overview.html" target="_self">Quick start</a></dd><dd><a href="/zh-cn/docs/06_build_environment.html" target="_self">Developer guide</a></dd></dl></div><div class="col col-6"><dl><dt>编辑文档</dt><dd><a href="https://github.com/bytomlabs/bytomlabs.github.io" target="_self">Github</a></dd></dl></div></div><div class="copyright"><span>Copyright © 2018 Bytom</span></div></div></footer></div></div>
	<script src="https://f.alicdn.com/react/15.4.1/react-with-addons.min.js"></script>
	<script src="https://f.alicdn.com/react/15.4.1/react-dom.min.js"></script>
	<script>
		window.rootPath = '';
  </script>
	<script src="/build/documentation.js"></script>
</body>
</html>